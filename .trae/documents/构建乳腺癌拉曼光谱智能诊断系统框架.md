# 乳腺癌拉曼光谱诊断系统开发计划 (v3 - Django + JWT)

本计划旨在构建基于 **Django** (后端) + **Vue 3** (前端) 的医疗诊断系统，实现 JWT 认证、用户注册登录及深色模式切换。

## 1. 后端开发 (Backend - Django + DRF)
### 1.1 环境与依赖
- **核心**: `django`, `djangorestframework`, `django-cors-headers`
- **认证**: `djangorestframework-simplejwt`
- **数据处理**: `pandas`, `numpy`, `scipy`, `torch`
- **数据库**: `mysqlclient` (连接 MySQL 8.0)

### 1.2 核心模块 (`backend/raman_api`)
*所有代码包含详细行间注释*
- **模型 (Models)**: 
    - 扩展 Django 原生 `User` 模型或使用关联 Profile。
    - `Patient`: 存储病患加密信息。
    - `SpectrumRecord`: 存储文件路径、诊断结果及关联用户。
- **认证逻辑**: 配置 `SIMPLE_JWT`，实现登录返回 Access/Refresh Token。
- **API 视图 (Views)**:
    - `RegisterView`: 用户注册接口。
    - `LoginView`: 基于 JWT 的登录接口。
    - `UploadView`: 需要 JWT 认证的光谱上传与处理接口。

## 2. 前端开发 (Frontend - Vue 3 + Vite)
### 2.1 状态管理与认证
- **Pinia (`stores/auth.js`)**: 
    - 存储 JWT Token。
    - 存储当前登录用户的 `username` 或 `real_name`。
- **Axios 拦截器**: 自动在 Header 中注入 `Authorization: Bearer <Token>`。

### 2.2 界面构建
*代码包含详细行间注释*
- **登录/注册页**: 使用 Element Plus 表单组件，实现响应式布局。
- **主工作台 (Dashboard.vue)**:
    - **顶部导航**: 右侧显示“欢迎您，[用户名]”，以及**深色模式切换按钮**。
    - **主题切换**: 使用 `@vueuse/core` 实现一键切换深色/浅色视觉风格。
    - **核心组件**: 集成 ECharts 光谱展示，支持缩放、平移及图层切换。

## 3. 数据库设计
- 使用 Django Migrations 自动生成 `users`, `patients`, `spectrum_records` 表结构。

## 4. 执行步骤
1.  **后端初始化**: 创建 Django 项目，配置 DRF 和 JWT。
2.  **用户系统**: 实现注册登录 API 并通过 Postman 验证。
3.  **前端基础**: 搭建 Vite + Vue 3 环境，配置 Element Plus 暗黑模式。
4.  **认证集成**: 完成前端登录页面，将 Token 存入持久化存储（LocalStorage）。
5.  **业务开发**: 实现主界面布局，显示用户名，并集成 ECharts 可视化。
